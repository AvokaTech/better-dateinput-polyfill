/**
 * better-dateinput-polyfill: input[type=date] polyfill for better-dom
 * @version 2.0.0-beta.1 Sat, 09 Apr 2016 10:37:44 GMT
 * @link https://github.com/chemerisuk/better-dateinput-polyfill
 * @copyright 2016 Maksim Chemerisuk
 * @license MIT
 */
!function(t,e,a,n,i,r,o,s){"use strict";var d=t.get("documentElement"),l=function(t,e){return"en-US"===d.lang?t:e},c=function(t){return t.toISOString().split("T")[0]},h=t.create(t.emmet("div."+e+"-calendar>(p."+e+"-calendar-header>a[unselectable=on]*2+time[is=local-time data-format='MMMM yyyy' aria-hidden=true unselectable=on]."+e+"-calendar-caption)")),u=t.create(t.emmet("table[aria-hidden=true]."+e+"-calendar-days>(thead>(tr>th[unselectable=on]*7>time[is=local-time data-format=E]))+(tbody."+e+"-calendar-body*2>tr*6>td*7)")),f=t.create(t.emmet("table[aria-hidden=true]."+e+"-calendar-months>tbody>tr*3>td*4>time[is=local-time data-format=MMM])")),b=t.create(t.emmet("time[is=local-time aria-hidden=true]."+e+"-value")),m=function(t){return["min","max"].map(function(e){return new Date(t.get(e)||"")})};f.findAll("time").forEach(function(t,e){t.set("datetime",new Date(2001,e,9).toISOString())}),u.findAll("time").forEach(function(t,e){t.set("datetime",new Date(l(2001,2002),0,e).toISOString())}),t.extend("input[type=date]",{constructor:function(){if(this._isNative())return!1;var t=h.clone(!0),a=b.clone(!0),n=this.css("color"),i=this.offset();this.css("color",document.addEventListener?"transparent":this.css("background-color")).on(["focus","click"],this._focusPicker.bind(this,t)).on("blur",this._blurPicker.bind(this,t)).on("change",this._syncDateValue.bind(this,a)).before(t.hide(),a),a.set("data-format",this.get("data-format")||"E, dd MMM yyyy").on("click",this._clickLabel.bind(this));var r=u.clone(!0),o=r.findAll("."+e+"-calendar-body"),s=f.clone(!0),d=t.find("."+e+"-calendar-caption"),l=this._changeValue.bind(this,d,s,o,t);t.append(r),o[1].hide().remove(),d.on("click",this._clickPickerCaption.bind(this,t,s,r,d,l)),this.on("keydown",["which"],this._keydownPicker.bind(this,t,s)).watch("value",l),this.closest("form").on("reset",this._resetForm.bind(this)),l(this.get("defaultValue")),t.on("mousedown",["target"],this._clickPicker.bind(this,t,s)).watch("aria-hidden",this._changePickerVisibility.bind(this,t,s,d)).css(this._getPickerStyles(i,t)).hide(),a.css(this._getLabelStyles(i,a,n)),this.matches(":focus")&&t.show()},_isNative:function(){var t=this.get("data-polyfill"),e="orientation"in window?"mobile":"desktop";if("none"===t)return!0;if(!t||t===e&&"all"!==t){if("date"===this[0].type)return!0;var a=this.value("_").value();return"_"!==a}return this.set("type","text"),!1},_getPickerStyles:function(t,e){var a=e.offset(),n=t.bottom-a.top;return d.clientHeight<t.bottom+a.height&&(n=a.top-t.bottom-a.height),{"margin-left":t.left-a.left+(t.width-a.width)/2,"margin-top":n,"z-index":1+(0|this.css("z-index"))}},_getLabelStyles:function(t,e,a){var n=e.offset(),i=this.css(["width","font","padding-left","padding-right","text-align","border-width","box-sizing"]);return i.color=a,i["line-height"]=t.height+"px",i["margin-left"]=t.left-n.left+"px",i["margin-top"]=t.top-n.top+"px",i},_changeValue:function(t,a,n,i,r,o){if(n.every(function(t){return i.contains(t)}))return!1;var s,d,c,h;r=new Date(r),r.getTime()||(r=new Date),d=r.getUTCMonth(),c=r.getUTCDate(),s=r.getUTCFullYear(),t.set("datetime",new Date(s,d).toISOString()),h=new Date(Date.UTC(s,d,1));var u=m(this);if(i.contains(a))a.findAll("td").forEach(function(t,a){h.setUTCMonth(a);var n=d-h.getUTCMonth(),i=e+"-calendar-";h<u[0]||h>u[1]?i+="out":n?i="":i+="today",t.set("class",i)});else{h.setUTCDate(h.getUTCDate()-h.getUTCDay()-l(1,0)),o=new Date(o);var f=r.getUTCMonth()-o.getUTCMonth()+100*(r.getUTCFullYear()-o.getUTCFullYear()),b=n[i.contains(n[0])?0:1],p=f?n[n[0]===b?1:0]:b;p.findAll("td").forEach(function(t){h.setUTCDate(h.getUTCDate()+1);var a=d-h.getUTCMonth(),n=e+"-calendar-";s!==h.getUTCFullYear()&&(a*=-1),h<u[0]||h>u[1]?n+="out":a>0?n+="past":0>a?n+="future":c===h.getUTCDate()?n+="today":n="",t.set("class",n).data("ts",h.getTime()).value(h.getUTCDate())}),f&&(b[f>0?"after":"before"](p),b.hide(function(){b.remove()}),p.show())}this.fire("change")},_syncDateValue:function(t){t.set("datetime",this.value())},_clickPicker:function(t,e,a){var n;if(a.matches("a")){n=new Date(this.value()),n.getTime()||(n=new Date);var i=a.next("a")[0]?-1:1;t.contains(e)?n.setUTCFullYear(n.getUTCFullYear()+i):n.setUTCMonth(n.getUTCMonth()+i)}else e.contains(a)?(a=a.closest("time"),n=new Date(this.value()),n.setUTCMonth(new Date(a.get("datetime")).getUTCMonth()),t.hide()):a.matches("td")&&(n=a.data("ts"),n&&(n=new Date(n),t.hide()));if(null!=n){var r=m(this);n<r[0]?n=r[0]:n>r[1]&&(n=r[1]),this.value(c(n))}return!1},_keydownPicker:function(t,e,d){var l,h;if(t.matches(":hidden")&&d===i)return!0;if(d===a)t.toggle();else if(d===r||d===n||d===i)t.hide();else if(d===o||d===s)this.empty();else if(h=new Date(this.value()),h.getTime()||(h=new Date),74===d||40===d?l=7:75===d||38===d?l=-7:76===d||39===d?l=1:72!==d&&37!==d||(l=-1),l){var u=t.contains(e);!u||40!==d&&38!==d?!u||37!==d&&39!==d?h.setUTCDate(h.getUTCDate()+l):h.setUTCMonth(h.getUTCMonth()+(l>0?1:-1)):h.setUTCMonth(h.getUTCMonth()+(l>0?4:-4));var f=m(this);h<f[0]||h>f[1]||this.value(c(h))}return d===n},_blurPicker:function(t){t.hide()},_focusPicker:function(t){var e=this;return this.get("readonly")?!1:(t.show(),void setTimeout(function(){var t=e[0];if("selectionStart"in t)t.selectionStart=0,t.selectionEnd=0;else{var a=t.createTextRange();a.moveStart("character",0),a.collapse(),a.moveEnd("character",0),a.select()}},0))},_clickPickerCaption:function(t,e,a,n,i){t.contains(e)?(e.remove(),t.append(a),n.set("data-format","MMMM yyyy")):(a.remove(),t.append(e),n.set("data-format","yyyy")),i(this.value())},_changePickerVisibility:function(t,e,a,n){"true"!==n&&t.contains(e)&&a.fire("click")},_clickLabel:function(){this.fire("focus")},_resetForm:function(){this.value(this.get("defaultValue"))}})}(window.DOM,"btr-dateinput",32,9,13,27,8,46),DOM.importStyles("@media screen",".btr-dateinput-value{position:absolute;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;border-style:none solid;border-color:transparent;pointer-events:none}.btr-dateinput-calendar{position:absolute;visibility:hidden;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#FFF;border-bottom:1px solid #CCC;overflow:hidden;border-radius:3px;-webkit-box-shadow:0 .25em .5em rgba(0,0,0,.2);box-shadow:0 .25em .5em rgba(0,0,0,.2);font-family:Helvetica Neue,Helvetica,Arial,sans-serif;text-align:center;opacity:1;-webkit-transform:scale(1,1) translate3d(0,0,0);transform:scale(1,1) translate3d(0,0,0);-webkit-transform-origin:50% 0;-ms-transform-origin:50% 0;transform-origin:50% 0;-webkit-transition:.1s ease-out;transition:.1s ease-out;width:15em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.btr-dateinput-calendar[aria-hidden=true]{opacity:0;-webkit-transform:scale(.75,.75) translate3d(0,0,0);transform:scale(.75,.75) translate3d(0,0,0)}.btr-dateinput-calendar-header{position:relative;margin:0;height:2.5em;line-height:2.5em;font-weight:700;white-space:nowrap;background:#2da4d6;text-shadow:0 1px 0 #555;border-bottom:1px solid #207fb1}.btr-dateinput-calendar-header>a{width:2.5em;height:2.5em;position:absolute;left:0;top:0;color:inherit}.btr-dateinput-calendar-header>time{display:block}.btr-dateinput-calendar-header>a:before{content:'\\25C4'}.btr-dateinput-calendar-header>a:before{font-size:.85em}.btr-dateinput-calendar-header>a+a{left:auto;right:0}.btr-dateinput-calendar-header>a+a:before{content:'\\25BA'}.btr-dateinput-calendar-days,.btr-dateinput-calendar-months{width:100%;table-layout:fixed;border-spacing:0;border-collapse:collapse;color:#555;background:#FFF;border-radius:3px;border:1px solid #CCC;border-bottom:0}.btr-dateinput-calendar-days>thead{border-top:1px solid #EEE;border-bottom:1px solid #CCC;font-size:.75em;background:#DDD;font-weight:700;text-shadow:0 1px 0 #f3f3f3}.btr-dateinput-calendar-body{-webkit-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);-webkit-transition:-webkit-transform .1s linear;transition:-webkit-transform .1s linear;transition:transform .1s linear;transition:transform .1s linear,-webkit-transform .1s linear}.btr-dateinput-calendar-body[aria-hidden=true]{-webkit-transform:translateX(-100%);-ms-transform:translateX(-100%);transform:translateX(-100%)}.btr-dateinput-calendar-body+.btr-dateinput-calendar-body{position:absolute;bottom:0}.btr-dateinput-calendar-body+.btr-dateinput-calendar-body[aria-hidden=true]{-webkit-transform:translateX(100%);-ms-transform:translateX(100%);transform:translateX(100%)}.btr-dateinput-calendar td,.btr-dateinput-calendar th{width:2em;height:2em;line-height:2;padding:0;text-align:center}.btr-dateinput-calendar-months td{line-height:4;height:4em}.btr-dateinput-calendar-months time{display:block}.btr-dateinput-calendar-past,.btr-dateinput-calendar-future{color:#DDD}.btr-dateinput-calendar-out{color:#CCC;text-shadow:0 1px 0 #FFF}.btr-dateinput-calendar-today{color:#FFF;background-color:#2da4d6;text-shadow:0 1px 0 #555;font-weight:700}.btr-dateinput-calendar-out,.btr-dateinput-calendar td:hover{background-color:#f3f3f3;background-color:rgba(0,0,0,.05)}.btr-dateinput-calendar-header>a:hover,td.btr-dateinput-calendar-today:hover{background-color:#207fb1;text-decoration:none}.btr-dateinput-value+input::-moz-placeholder{color:initial}");